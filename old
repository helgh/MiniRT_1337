NAME = miniRT

CC = cc

C_FLAGS = -Wall -Wextra -Werror

FLAG_MLX = -lmlx -framework OpenGL -framework Appkit

INC = $(addprefix mandatory_part/inc/, minirt.h macros.h struct.h)

SOURCE = $(addprefix mandatory_part/, main.c error_free.c ft_malloc.c) \
			$(addprefix mandatory_part/libft_utils/, ft_atof.c ft_strlen.c ft_split.c ft_strcmp.c \
						get_next_line.c get_next_line_utils.c utils.c) \
			$(addprefix mandatory_part/parse/, ab_light.c spot_light.c camera.c sphere.c plane.c \
						cylinder.c scene.c camera_utils.c utils_parse.c) \
			$(addprefix mandatory_part/render/, draw.c lighting.c mlx.c rays.c shadow.c) \
			$(addprefix mandatory_part/intersect/, hits.c intersect_cy.c \
						intersect_pl.c intersect_sp.c sect_world.c) \
			$(addprefix mandatory_part/transform/, identity_matrix.c inverse.c \
						determinant.c mult_mat_point.c mult_matrix.c rot_utils.c \
						rotation.c transformation.c transpose_matrix.c) \
			$(addprefix mandatory_part/math/, color_scal.c op_color.c op_tuple.c \
						tuple_scal.c op_vector.c set_get.c)
					
OBJ_SRC = $(SOURCE:.c=.o)

all: $(NAME)

$(NAME): $(OBJ_SRC)
	$(CC) $(OBJ_SRC) -o $(NAME) $(FLAG_MLX)

%.o: $(SOURCE)/%.c $(INC)
	$(CC) $(C_FLAGS) -c -o $@ $<

clean:
	rm -f $(OBJ_SRC)

fclean: clean
	rm -f $(NAME)

re: fclean all
